<div class="container py-4">
  <h2>Panel de administración</h2>

  <div class="admin-toolbar d-flex gap-3 align-items-center mb-3 flex-wrap">
    <div class="input-group search">
      <span class="input-group-text bg-white">
        <i class="bi bi-search"></i>
      </span>
      <input
        class="form-control"
        placeholder="Buscar servicios..."
        (input)="onSearch($event)"
      />
    </div>

    <button class="btn btn-primary create" (click)="openModal(true)">
      + Crear servicio
    </button>
  </div>

  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead>
          <tr>
            <th scope="col" class="small backgroud-blue-light">Imagen</th>
            <th scope="col" class="small backgroud-blue-light">Nombre</th>
            <th scope="col" class="small backgroud-blue-light">Precio</th>
            <th scope="col" class="small text-end backgroud-blue-light">Acciones</th>
          </tr>
        </thead>
        <tbody>
          @for (row of paginated; track row.id) {
            <tr>
              <td>
                <img [src]="row.image" alt="" class="img-thumbnail service-thumb" />
              </td>
              <td class="text-truncate name-cell">{{ row.name }}</td>
              <td>{{ row.price | currency : "USD" }}</td>
              <td class="text-end text-nowrap">
                <button class="btn btn-sm me-2 rounded-pill backgroud-blue-light action-btn" (click)="openModal(false, row)">
                  <i class="bi bi-pencil me-1"></i><span class="btn-text">Editar</span>
                </button>
                <button class="btn btn-sm rounded-pill backgroud-blue-light action-btn" (click)="remove(row)">
                  <i class="bi bi-trash me-1"></i><span class="btn-text">Eliminar</span>
                </button>
              </td>
            </tr>
          }

          @if (paginated.length === 0) {
            <tr>
              <td colspan="4" class="text-center py-4 text-muted">Sin resultados</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <div class="pager-wrap d-flex justify-content-between align-items-center px-3 py-2 bg-white">
    <small class="text-muted">
      Mostrando {{ rangeStart }}–{{ rangeEnd }} de {{ total }}
    </small>

    <div class="d-flex gap-2">
      <button
        class="btn backgroud-blue-light btn-sm rounded-pill px-3"
        (click)="prev()"
        [disabled]="page === 1 || total === 0">
        Anterior
      </button>

      <button
        class="btn backgroud-blue-light btn-sm rounded-pill px-3"
        (click)="next()"
        [disabled]="page === totalPages || total === 0">
        Siguiente
      </button>
    </div>
  </div>
</div>

<ts-create-service
  [open]="showCreate"
  (close)="showCreate = false"
  [isCreate]="isCreate"
  [selectService]="selectService"
  (save)="onCreateSave($event)">
</ts-create-service>
